{"run_id": "237987e1c9fc475b84a5bdabd4878a0e", "test_id": "test/test_live_e27_chime.py::test_live_area_chime_on_ack", "record_type": "test_start", "t_ms": 0, "ts_utc": "2026-01-11T05:52:57Z", "meta": {"pid": 49926}}
{"run_id": "237987e1c9fc475b84a5bdabd4878a0e", "test_id": "test/test_live_e27_chime.py::test_live_area_chime_on_ack", "record_type": "test_end", "t_ms": 5509, "ts_utc": "2026-01-11T05:53:02Z", "outcome": "fail", "error": {"when": "setup", "longrepr": "@pytest.fixture(scope=\"session\")\n    async def live_e27_client() -> AsyncIterator[Elke27Client]:\n        if _get_env(\"ELKE27_LIVE\") != \"1\":\n            pytest.skip(\"ELKE27_LIVE not set; skipping live E27 tests.\")\n    \n        host = _get_env(\"ELKE27_HOST\")\n        access_code = _get_env(\"ELKE27_ACCESS_CODE\")\n        passphrase = _get_env(\"ELKE27_PASSPHRASE\")\n        if not host or not access_code or not passphrase:\n            pytest.skip(\"Missing E27 live env vars; source ~/elk-e27-env-vars.sh\")\n    \n        port = int(_get_env(\"ELKE27_PORT\") or \"2101\")\n    \n        client = Elke27Client()\n        panel = {\"host\": host, \"port\": port}\n        identity = E27Identity(\n            mn=_get_env(\"ELKE27_MN\") or \"CODEx\",\n            sn=_get_env(\"ELKE27_SN\") or \"LIVE\",\n            fwver=_get_env(\"ELKE27_FWVER\") or \"0\",\n            hwver=_get_env(\"ELKE27_HWVER\") or \"0\",\n            osver=_get_env(\"ELKE27_OSVER\") or \"0\",\n        )\n        creds = _LiveCredentials(access_code=access_code, passphrase=passphrase)\n    \n        try:\n            link_keys = await client.async_link(\n                host=host,\n                port=port,\n                access_code=creds.access_code,\n                passphrase=creds.passphrase,\n                client_identity=identity,\n            )\n        except Exception as exc:  # noqa: BLE001\n            pytest.fail(f\"E27 link failed; check credentials and panel availability: {exc}\")\n    \n        try:\n>           await client.async_connect(host, port, link_keys)\n\ntest/conftest.py:67: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nelke27_lib/client.py:869: in async_connect\n    self._raise_v2_error(exc, phase=\"connect\")\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <elke27_lib.client.Elke27Client object at 0x108879cd0>\nexc = KernelError('Session connect failed for 192.168.1.197:2101: HELLO failed for 192.168.1.197:2101: Hello response not found in cleartext JSON stream.')\n\n    def _raise_v2_error(self, exc: BaseException, *, phase: str) -> None:\n        del phase\n        for err in _iter_causes(exc):\n            if isinstance(err, E27ProvisioningRequired):\n                raise Elke27LinkRequiredError(\"Linking required to perform this operation.\") from None\n            if isinstance(err, KernelMissingContextError):\n                raise Elke27InvalidArgument(\"Missing required context for operation.\") from None\n            if isinstance(err, (E27ProvisioningTimeout, InvalidCredentials, E27AuthFailed, InvalidPinError)):\n                raise Elke27AuthError(\"Authentication failed for provisioning.\") from None\n            if isinstance(err, E27LinkInvalid):\n                raise Elke27CryptoError(\"Link credentials appear invalid.\") from None\n            if isinstance(err, CryptoError):\n                raise Elke27CryptoError(\"Cryptographic error.\") from None\n            if isinstance(err, E27ProtocolError):\n                raise Elke27ProtocolErrorV2(\"Protocol error.\") from None\n            if isinstance(err, (E27TransportError, OSError, ConnectionError)):\n                raise Elke27ConnectionError(\"Connection error.\") from None\n            if isinstance(err, (TimeoutError, asyncio.TimeoutError)):\n                raise Elke27TimeoutError(\"Operation timed out.\") from None\n            if isinstance(err, (KernelError, E27MissingContext, KernelInvalidPanelError, KernelNotLinkedError)):\n>               raise Elke27ProtocolErrorV2(\"Protocol error.\") from None\nE               elke27_lib.errors.Elke27ProtocolError: Protocol error.\n\nelke27_lib/client.py:404: Elke27ProtocolError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <Coroutine test_live_area_chime_on_ack>\n\n    def setup(self) -> None:\n        runner_fixture_id = f\"_{self._loop_scope}_scoped_runner\"\n        if runner_fixture_id not in self.fixturenames:\n            self.fixturenames.append(runner_fixture_id)\n>       return super().setup()\n               ^^^^^^^^^^^^^^^\n\n/opt/homebrew/lib/python3.12/site-packages/pytest_asyncio/plugin.py:458: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/homebrew/lib/python3.12/site-packages/pytest_asyncio/plugin.py:743: in pytest_fixture_setup\n    hook_result = yield\n                  ^^^^^\n/opt/homebrew/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper\n    result = runner.run(setup(), context=context)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/homebrew/Cellar/python@3.12/3.12.4/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py:118: in run\n    return self._loop.run_until_complete(task)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/homebrew/Cellar/python@3.12/3.12.4/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py:687: in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n/opt/homebrew/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup\n    res = await gen_obj.__anext__()\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\n    @pytest.fixture(scope=\"session\")\n    async def live_e27_client() -> AsyncIterator[Elke27Client]:\n        if _get_env(\"ELKE27_LIVE\") != \"1\":\n            pytest.skip(\"ELKE27_LIVE not set; skipping live E27 tests.\")\n    \n        host = _get_env(\"ELKE27_HOST\")\n        access_code = _get_env(\"ELKE27_ACCESS_CODE\")\n        passphrase = _get_env(\"ELKE27_PASSPHRASE\")\n        if not host or not access_code or not passphrase:\n            pytest.skip(\"Missing E27 live env vars; source ~/elk-e27-env-vars.sh\")\n    \n        port = int(_get_env(\"ELKE27_PORT\") or \"2101\")\n    \n        client = Elke27Client()\n        panel = {\"host\": host, \"port\": port}\n        identity = E27Identity(\n            mn=_get_env(\"ELKE27_MN\") or \"CODEx\",\n            sn=_get_env(\"ELKE27_SN\") or \"LIVE\",\n            fwver=_get_env(\"ELKE27_FWVER\") or \"0\",\n            hwver=_get_env(\"ELKE27_HWVER\") or \"0\",\n            osver=_get_env(\"ELKE27_OSVER\") or \"0\",\n        )\n        creds = _LiveCredentials(access_code=access_code, passphrase=passphrase)\n    \n        try:\n            link_keys = await client.async_link(\n                host=host,\n                port=port,\n                access_code=creds.access_code,\n                passphrase=creds.passphrase,\n                client_identity=identity,\n            )\n        except Exception as exc:  # noqa: BLE001\n            pytest.fail(f\"E27 link failed; check credentials and panel availability: {exc}\")\n    \n        try:\n            await client.async_connect(host, port, link_keys)\n        except Exception as exc:  # noqa: BLE001\n>           pytest.fail(f\"E27 connect failed; check panel availability: {exc}\")\nE           Failed: E27 connect failed; check panel availability: Protocol error.\n\ntest/conftest.py:69: Failed"}}
{"run_id": "237987e1c9fc475b84a5bdabd4878a0e", "test_id": "test/test_live_e27_chime.py::test_live_area_chime_off_ack", "record_type": "test_start", "t_ms": 0, "ts_utc": "2026-01-11T05:53:02Z", "meta": {"pid": 49926}}
{"run_id": "237987e1c9fc475b84a5bdabd4878a0e", "test_id": "test/test_live_e27_chime.py::test_live_area_chime_off_ack", "record_type": "test_end", "t_ms": 44, "ts_utc": "2026-01-11T05:53:02Z", "outcome": "fail", "error": {"when": "setup", "longrepr": "@pytest.fixture(scope=\"session\")\n    async def live_e27_client() -> AsyncIterator[Elke27Client]:\n        if _get_env(\"ELKE27_LIVE\") != \"1\":\n            pytest.skip(\"ELKE27_LIVE not set; skipping live E27 tests.\")\n    \n        host = _get_env(\"ELKE27_HOST\")\n        access_code = _get_env(\"ELKE27_ACCESS_CODE\")\n        passphrase = _get_env(\"ELKE27_PASSPHRASE\")\n        if not host or not access_code or not passphrase:\n            pytest.skip(\"Missing E27 live env vars; source ~/elk-e27-env-vars.sh\")\n    \n        port = int(_get_env(\"ELKE27_PORT\") or \"2101\")\n    \n        client = Elke27Client()\n        panel = {\"host\": host, \"port\": port}\n        identity = E27Identity(\n            mn=_get_env(\"ELKE27_MN\") or \"CODEx\",\n            sn=_get_env(\"ELKE27_SN\") or \"LIVE\",\n            fwver=_get_env(\"ELKE27_FWVER\") or \"0\",\n            hwver=_get_env(\"ELKE27_HWVER\") or \"0\",\n            osver=_get_env(\"ELKE27_OSVER\") or \"0\",\n        )\n        creds = _LiveCredentials(access_code=access_code, passphrase=passphrase)\n    \n        try:\n            link_keys = await client.async_link(\n                host=host,\n                port=port,\n                access_code=creds.access_code,\n                passphrase=creds.passphrase,\n                client_identity=identity,\n            )\n        except Exception as exc:  # noqa: BLE001\n            pytest.fail(f\"E27 link failed; check credentials and panel availability: {exc}\")\n    \n        try:\n>           await client.async_connect(host, port, link_keys)\n\ntest/conftest.py:67: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nelke27_lib/client.py:869: in async_connect\n    self._raise_v2_error(exc, phase=\"connect\")\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <elke27_lib.client.Elke27Client object at 0x108879cd0>\nexc = KernelError('Session connect failed for 192.168.1.197:2101: HELLO failed for 192.168.1.197:2101: Hello response not found in cleartext JSON stream.')\n\n    def _raise_v2_error(self, exc: BaseException, *, phase: str) -> None:\n        del phase\n        for err in _iter_causes(exc):\n            if isinstance(err, E27ProvisioningRequired):\n                raise Elke27LinkRequiredError(\"Linking required to perform this operation.\") from None\n            if isinstance(err, KernelMissingContextError):\n                raise Elke27InvalidArgument(\"Missing required context for operation.\") from None\n            if isinstance(err, (E27ProvisioningTimeout, InvalidCredentials, E27AuthFailed, InvalidPinError)):\n                raise Elke27AuthError(\"Authentication failed for provisioning.\") from None\n            if isinstance(err, E27LinkInvalid):\n                raise Elke27CryptoError(\"Link credentials appear invalid.\") from None\n            if isinstance(err, CryptoError):\n                raise Elke27CryptoError(\"Cryptographic error.\") from None\n            if isinstance(err, E27ProtocolError):\n                raise Elke27ProtocolErrorV2(\"Protocol error.\") from None\n            if isinstance(err, (E27TransportError, OSError, ConnectionError)):\n                raise Elke27ConnectionError(\"Connection error.\") from None\n            if isinstance(err, (TimeoutError, asyncio.TimeoutError)):\n                raise Elke27TimeoutError(\"Operation timed out.\") from None\n            if isinstance(err, (KernelError, E27MissingContext, KernelInvalidPanelError, KernelNotLinkedError)):\n>               raise Elke27ProtocolErrorV2(\"Protocol error.\") from None\nE               elke27_lib.errors.Elke27ProtocolError: Protocol error.\n\nelke27_lib/client.py:404: Elke27ProtocolError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <Coroutine test_live_area_chime_off_ack>\n\n    def setup(self) -> None:\n        runner_fixture_id = f\"_{self._loop_scope}_scoped_runner\"\n        if runner_fixture_id not in self.fixturenames:\n            self.fixturenames.append(runner_fixture_id)\n>       return super().setup()\n               ^^^^^^^^^^^^^^^\n\n/opt/homebrew/lib/python3.12/site-packages/pytest_asyncio/plugin.py:458: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/homebrew/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper\n    result = runner.run(setup(), context=context)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/homebrew/Cellar/python@3.12/3.12.4/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py:118: in run\n    return self._loop.run_until_complete(task)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/homebrew/Cellar/python@3.12/3.12.4/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py:687: in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n/opt/homebrew/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup\n    res = await gen_obj.__anext__()\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\n    @pytest.fixture(scope=\"session\")\n    async def live_e27_client() -> AsyncIterator[Elke27Client]:\n        if _get_env(\"ELKE27_LIVE\") != \"1\":\n            pytest.skip(\"ELKE27_LIVE not set; skipping live E27 tests.\")\n    \n        host = _get_env(\"ELKE27_HOST\")\n        access_code = _get_env(\"ELKE27_ACCESS_CODE\")\n        passphrase = _get_env(\"ELKE27_PASSPHRASE\")\n        if not host or not access_code or not passphrase:\n            pytest.skip(\"Missing E27 live env vars; source ~/elk-e27-env-vars.sh\")\n    \n        port = int(_get_env(\"ELKE27_PORT\") or \"2101\")\n    \n        client = Elke27Client()\n        panel = {\"host\": host, \"port\": port}\n        identity = E27Identity(\n            mn=_get_env(\"ELKE27_MN\") or \"CODEx\",\n            sn=_get_env(\"ELKE27_SN\") or \"LIVE\",\n            fwver=_get_env(\"ELKE27_FWVER\") or \"0\",\n            hwver=_get_env(\"ELKE27_HWVER\") or \"0\",\n            osver=_get_env(\"ELKE27_OSVER\") or \"0\",\n        )\n        creds = _LiveCredentials(access_code=access_code, passphrase=passphrase)\n    \n        try:\n            link_keys = await client.async_link(\n                host=host,\n                port=port,\n                access_code=creds.access_code,\n                passphrase=creds.passphrase,\n                client_identity=identity,\n            )\n        except Exception as exc:  # noqa: BLE001\n            pytest.fail(f\"E27 link failed; check credentials and panel availability: {exc}\")\n    \n        try:\n            await client.async_connect(host, port, link_keys)\n        except Exception as exc:  # noqa: BLE001\n>           pytest.fail(f\"E27 connect failed; check panel availability: {exc}\")\nE           Failed: E27 connect failed; check panel availability: Protocol error.\n\ntest/conftest.py:69: Failed"}}
{"run_id": "237987e1c9fc475b84a5bdabd4878a0e", "test_id": "test/test_live_e27_chime.py::test_live_area_chime_on_persist", "record_type": "test_start", "t_ms": 0, "ts_utc": "2026-01-11T05:53:02Z", "meta": {"pid": 49926}}
{"run_id": "237987e1c9fc475b84a5bdabd4878a0e", "test_id": "test/test_live_e27_chime.py::test_live_area_chime_on_persist", "record_type": "test_end", "t_ms": 43, "ts_utc": "2026-01-11T05:53:03Z", "outcome": "fail", "error": {"when": "setup", "longrepr": "@pytest.fixture(scope=\"session\")\n    async def live_e27_client() -> AsyncIterator[Elke27Client]:\n        if _get_env(\"ELKE27_LIVE\") != \"1\":\n            pytest.skip(\"ELKE27_LIVE not set; skipping live E27 tests.\")\n    \n        host = _get_env(\"ELKE27_HOST\")\n        access_code = _get_env(\"ELKE27_ACCESS_CODE\")\n        passphrase = _get_env(\"ELKE27_PASSPHRASE\")\n        if not host or not access_code or not passphrase:\n            pytest.skip(\"Missing E27 live env vars; source ~/elk-e27-env-vars.sh\")\n    \n        port = int(_get_env(\"ELKE27_PORT\") or \"2101\")\n    \n        client = Elke27Client()\n        panel = {\"host\": host, \"port\": port}\n        identity = E27Identity(\n            mn=_get_env(\"ELKE27_MN\") or \"CODEx\",\n            sn=_get_env(\"ELKE27_SN\") or \"LIVE\",\n            fwver=_get_env(\"ELKE27_FWVER\") or \"0\",\n            hwver=_get_env(\"ELKE27_HWVER\") or \"0\",\n            osver=_get_env(\"ELKE27_OSVER\") or \"0\",\n        )\n        creds = _LiveCredentials(access_code=access_code, passphrase=passphrase)\n    \n        try:\n            link_keys = await client.async_link(\n                host=host,\n                port=port,\n                access_code=creds.access_code,\n                passphrase=creds.passphrase,\n                client_identity=identity,\n            )\n        except Exception as exc:  # noqa: BLE001\n            pytest.fail(f\"E27 link failed; check credentials and panel availability: {exc}\")\n    \n        try:\n>           await client.async_connect(host, port, link_keys)\n\ntest/conftest.py:67: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nelke27_lib/client.py:869: in async_connect\n    self._raise_v2_error(exc, phase=\"connect\")\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <elke27_lib.client.Elke27Client object at 0x108879cd0>\nexc = KernelError('Session connect failed for 192.168.1.197:2101: HELLO failed for 192.168.1.197:2101: Hello response not found in cleartext JSON stream.')\n\n    def _raise_v2_error(self, exc: BaseException, *, phase: str) -> None:\n        del phase\n        for err in _iter_causes(exc):\n            if isinstance(err, E27ProvisioningRequired):\n                raise Elke27LinkRequiredError(\"Linking required to perform this operation.\") from None\n            if isinstance(err, KernelMissingContextError):\n                raise Elke27InvalidArgument(\"Missing required context for operation.\") from None\n            if isinstance(err, (E27ProvisioningTimeout, InvalidCredentials, E27AuthFailed, InvalidPinError)):\n                raise Elke27AuthError(\"Authentication failed for provisioning.\") from None\n            if isinstance(err, E27LinkInvalid):\n                raise Elke27CryptoError(\"Link credentials appear invalid.\") from None\n            if isinstance(err, CryptoError):\n                raise Elke27CryptoError(\"Cryptographic error.\") from None\n            if isinstance(err, E27ProtocolError):\n                raise Elke27ProtocolErrorV2(\"Protocol error.\") from None\n            if isinstance(err, (E27TransportError, OSError, ConnectionError)):\n                raise Elke27ConnectionError(\"Connection error.\") from None\n            if isinstance(err, (TimeoutError, asyncio.TimeoutError)):\n                raise Elke27TimeoutError(\"Operation timed out.\") from None\n            if isinstance(err, (KernelError, E27MissingContext, KernelInvalidPanelError, KernelNotLinkedError)):\n>               raise Elke27ProtocolErrorV2(\"Protocol error.\") from None\nE               elke27_lib.errors.Elke27ProtocolError: Protocol error.\n\nelke27_lib/client.py:404: Elke27ProtocolError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <Coroutine test_live_area_chime_on_persist>\n\n    def setup(self) -> None:\n        runner_fixture_id = f\"_{self._loop_scope}_scoped_runner\"\n        if runner_fixture_id not in self.fixturenames:\n            self.fixturenames.append(runner_fixture_id)\n>       return super().setup()\n               ^^^^^^^^^^^^^^^\n\n/opt/homebrew/lib/python3.12/site-packages/pytest_asyncio/plugin.py:458: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/homebrew/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper\n    result = runner.run(setup(), context=context)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/homebrew/Cellar/python@3.12/3.12.4/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py:118: in run\n    return self._loop.run_until_complete(task)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/homebrew/Cellar/python@3.12/3.12.4/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py:687: in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n/opt/homebrew/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup\n    res = await gen_obj.__anext__()\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\n    @pytest.fixture(scope=\"session\")\n    async def live_e27_client() -> AsyncIterator[Elke27Client]:\n        if _get_env(\"ELKE27_LIVE\") != \"1\":\n            pytest.skip(\"ELKE27_LIVE not set; skipping live E27 tests.\")\n    \n        host = _get_env(\"ELKE27_HOST\")\n        access_code = _get_env(\"ELKE27_ACCESS_CODE\")\n        passphrase = _get_env(\"ELKE27_PASSPHRASE\")\n        if not host or not access_code or not passphrase:\n            pytest.skip(\"Missing E27 live env vars; source ~/elk-e27-env-vars.sh\")\n    \n        port = int(_get_env(\"ELKE27_PORT\") or \"2101\")\n    \n        client = Elke27Client()\n        panel = {\"host\": host, \"port\": port}\n        identity = E27Identity(\n            mn=_get_env(\"ELKE27_MN\") or \"CODEx\",\n            sn=_get_env(\"ELKE27_SN\") or \"LIVE\",\n            fwver=_get_env(\"ELKE27_FWVER\") or \"0\",\n            hwver=_get_env(\"ELKE27_HWVER\") or \"0\",\n            osver=_get_env(\"ELKE27_OSVER\") or \"0\",\n        )\n        creds = _LiveCredentials(access_code=access_code, passphrase=passphrase)\n    \n        try:\n            link_keys = await client.async_link(\n                host=host,\n                port=port,\n                access_code=creds.access_code,\n                passphrase=creds.passphrase,\n                client_identity=identity,\n            )\n        except Exception as exc:  # noqa: BLE001\n            pytest.fail(f\"E27 link failed; check credentials and panel availability: {exc}\")\n    \n        try:\n            await client.async_connect(host, port, link_keys)\n        except Exception as exc:  # noqa: BLE001\n>           pytest.fail(f\"E27 connect failed; check panel availability: {exc}\")\nE           Failed: E27 connect failed; check panel availability: Protocol error.\n\ntest/conftest.py:69: Failed"}}
{"run_id": "237987e1c9fc475b84a5bdabd4878a0e", "test_id": "test/test_live_e27_chime.py::test_live_area_chime_state_roundtrip", "record_type": "test_start", "t_ms": 0, "ts_utc": "2026-01-11T05:53:03Z", "meta": {"pid": 49926}}
{"run_id": "237987e1c9fc475b84a5bdabd4878a0e", "test_id": "test/test_live_e27_chime.py::test_live_area_chime_state_roundtrip", "record_type": "test_end", "t_ms": 43, "ts_utc": "2026-01-11T05:53:03Z", "outcome": "fail", "error": {"when": "setup", "longrepr": "@pytest.fixture(scope=\"session\")\n    async def live_e27_client() -> AsyncIterator[Elke27Client]:\n        if _get_env(\"ELKE27_LIVE\") != \"1\":\n            pytest.skip(\"ELKE27_LIVE not set; skipping live E27 tests.\")\n    \n        host = _get_env(\"ELKE27_HOST\")\n        access_code = _get_env(\"ELKE27_ACCESS_CODE\")\n        passphrase = _get_env(\"ELKE27_PASSPHRASE\")\n        if not host or not access_code or not passphrase:\n            pytest.skip(\"Missing E27 live env vars; source ~/elk-e27-env-vars.sh\")\n    \n        port = int(_get_env(\"ELKE27_PORT\") or \"2101\")\n    \n        client = Elke27Client()\n        panel = {\"host\": host, \"port\": port}\n        identity = E27Identity(\n            mn=_get_env(\"ELKE27_MN\") or \"CODEx\",\n            sn=_get_env(\"ELKE27_SN\") or \"LIVE\",\n            fwver=_get_env(\"ELKE27_FWVER\") or \"0\",\n            hwver=_get_env(\"ELKE27_HWVER\") or \"0\",\n            osver=_get_env(\"ELKE27_OSVER\") or \"0\",\n        )\n        creds = _LiveCredentials(access_code=access_code, passphrase=passphrase)\n    \n        try:\n            link_keys = await client.async_link(\n                host=host,\n                port=port,\n                access_code=creds.access_code,\n                passphrase=creds.passphrase,\n                client_identity=identity,\n            )\n        except Exception as exc:  # noqa: BLE001\n            pytest.fail(f\"E27 link failed; check credentials and panel availability: {exc}\")\n    \n        try:\n>           await client.async_connect(host, port, link_keys)\n\ntest/conftest.py:67: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nelke27_lib/client.py:869: in async_connect\n    self._raise_v2_error(exc, phase=\"connect\")\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <elke27_lib.client.Elke27Client object at 0x108879cd0>\nexc = KernelError('Session connect failed for 192.168.1.197:2101: HELLO failed for 192.168.1.197:2101: Hello response not found in cleartext JSON stream.')\n\n    def _raise_v2_error(self, exc: BaseException, *, phase: str) -> None:\n        del phase\n        for err in _iter_causes(exc):\n            if isinstance(err, E27ProvisioningRequired):\n                raise Elke27LinkRequiredError(\"Linking required to perform this operation.\") from None\n            if isinstance(err, KernelMissingContextError):\n                raise Elke27InvalidArgument(\"Missing required context for operation.\") from None\n            if isinstance(err, (E27ProvisioningTimeout, InvalidCredentials, E27AuthFailed, InvalidPinError)):\n                raise Elke27AuthError(\"Authentication failed for provisioning.\") from None\n            if isinstance(err, E27LinkInvalid):\n                raise Elke27CryptoError(\"Link credentials appear invalid.\") from None\n            if isinstance(err, CryptoError):\n                raise Elke27CryptoError(\"Cryptographic error.\") from None\n            if isinstance(err, E27ProtocolError):\n                raise Elke27ProtocolErrorV2(\"Protocol error.\") from None\n            if isinstance(err, (E27TransportError, OSError, ConnectionError)):\n                raise Elke27ConnectionError(\"Connection error.\") from None\n            if isinstance(err, (TimeoutError, asyncio.TimeoutError)):\n                raise Elke27TimeoutError(\"Operation timed out.\") from None\n            if isinstance(err, (KernelError, E27MissingContext, KernelInvalidPanelError, KernelNotLinkedError)):\n>               raise Elke27ProtocolErrorV2(\"Protocol error.\") from None\nE               elke27_lib.errors.Elke27ProtocolError: Protocol error.\n\nelke27_lib/client.py:404: Elke27ProtocolError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <Coroutine test_live_area_chime_state_roundtrip>\n\n    def setup(self) -> None:\n        runner_fixture_id = f\"_{self._loop_scope}_scoped_runner\"\n        if runner_fixture_id not in self.fixturenames:\n            self.fixturenames.append(runner_fixture_id)\n>       return super().setup()\n               ^^^^^^^^^^^^^^^\n\n/opt/homebrew/lib/python3.12/site-packages/pytest_asyncio/plugin.py:458: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/homebrew/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper\n    result = runner.run(setup(), context=context)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/homebrew/Cellar/python@3.12/3.12.4/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py:118: in run\n    return self._loop.run_until_complete(task)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/homebrew/Cellar/python@3.12/3.12.4/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py:687: in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n/opt/homebrew/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup\n    res = await gen_obj.__anext__()\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\n    @pytest.fixture(scope=\"session\")\n    async def live_e27_client() -> AsyncIterator[Elke27Client]:\n        if _get_env(\"ELKE27_LIVE\") != \"1\":\n            pytest.skip(\"ELKE27_LIVE not set; skipping live E27 tests.\")\n    \n        host = _get_env(\"ELKE27_HOST\")\n        access_code = _get_env(\"ELKE27_ACCESS_CODE\")\n        passphrase = _get_env(\"ELKE27_PASSPHRASE\")\n        if not host or not access_code or not passphrase:\n            pytest.skip(\"Missing E27 live env vars; source ~/elk-e27-env-vars.sh\")\n    \n        port = int(_get_env(\"ELKE27_PORT\") or \"2101\")\n    \n        client = Elke27Client()\n        panel = {\"host\": host, \"port\": port}\n        identity = E27Identity(\n            mn=_get_env(\"ELKE27_MN\") or \"CODEx\",\n            sn=_get_env(\"ELKE27_SN\") or \"LIVE\",\n            fwver=_get_env(\"ELKE27_FWVER\") or \"0\",\n            hwver=_get_env(\"ELKE27_HWVER\") or \"0\",\n            osver=_get_env(\"ELKE27_OSVER\") or \"0\",\n        )\n        creds = _LiveCredentials(access_code=access_code, passphrase=passphrase)\n    \n        try:\n            link_keys = await client.async_link(\n                host=host,\n                port=port,\n                access_code=creds.access_code,\n                passphrase=creds.passphrase,\n                client_identity=identity,\n            )\n        except Exception as exc:  # noqa: BLE001\n            pytest.fail(f\"E27 link failed; check credentials and panel availability: {exc}\")\n    \n        try:\n            await client.async_connect(host, port, link_keys)\n        except Exception as exc:  # noqa: BLE001\n>           pytest.fail(f\"E27 connect failed; check panel availability: {exc}\")\nE           Failed: E27 connect failed; check panel availability: Protocol error.\n\ntest/conftest.py:69: Failed"}}
