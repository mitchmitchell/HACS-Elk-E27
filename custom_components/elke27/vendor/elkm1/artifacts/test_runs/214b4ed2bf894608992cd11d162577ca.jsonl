{"run_id": "214b4ed2bf894608992cd11d162577ca", "test_id": "test/test_e27_area_get_status_live.py::test_live_area_get_status", "record_type": "test_start", "t_ms": 0, "ts_utc": "2026-01-14T04:11:11Z", "meta": {"pid": 71692}}
{"run_id": "214b4ed2bf894608992cd11d162577ca", "test_id": "test/test_e27_area_get_status_live.py::test_live_area_get_status", "record_type": "test_end", "t_ms": 591, "ts_utc": "2026-01-14T04:11:11Z", "outcome": "pass", "error": null}
{"run_id": "214b4ed2bf894608992cd11d162577ca", "test_id": "test/test_e27_area_info_live.py::test_live_area_info", "record_type": "test_start", "t_ms": 0, "ts_utc": "2026-01-14T04:11:16Z", "meta": {"pid": 71692}}
{"run_id": "214b4ed2bf894608992cd11d162577ca", "test_id": "test/test_e27_area_info_live.py::test_live_area_info", "record_type": "test_end", "t_ms": 515, "ts_utc": "2026-01-14T04:11:17Z", "outcome": "fail", "error": {"when": "call", "longrepr": "@pytest.mark.integration\n    @pytest.mark.asyncio\n    async def test_live_area_info() -> None:\n        log_level = str(_env(\"LOG_LEVEL\", \"INFO\") or \"INFO\").upper()\n        logging.basicConfig(level=getattr(logging, log_level, logging.INFO), force=True)\n        logging.getLogger(\"elke27_lib.session\").setLevel(logging.DEBUG)\n    \n        host = _require_env(\"ELKE27_HOST\")\n        port = int(_env(\"ELKE27_PORT\", \"2101\") or 2101)\n        access_code = _require_env(\"ELKE27_ACCESS_CODE\")\n        passphrase = _require_env(\"ELKE27_PASSPHRASE\")\n        mn = _require_env(\"ELKE27_MN\")\n        sn = _require_env(\"ELKE27_SN\")\n        fwver = _require_env(\"ELKE27_FWVER\")\n        hwver = _require_env(\"ELKE27_HWVER\")\n        osver = _require_env(\"ELKE27_OSVER\")\n        timeout_s = float(_env(\"ELKE27_TIMEOUT_S\", \"60.0\") or 60.0)\n    \n        client_identity = linking.E27Identity(mn=mn, sn=sn, fwver=fwver, hwver=hwver, osver=osver)\n        client = Elke27Client(features=[\"elke27_lib.features.area\"])\n    \n        creds = _Credentials(access_code=access_code, passphrase=passphrase)\n        try:\n            link_keys = await client.async_link(\n                host,\n                port,\n                access_code=creds.access_code,\n                passphrase=creds.passphrase,\n                client_identity=client_identity,\n                timeout_s=timeout_s,\n            )\n            await client.async_connect(host, port, link_keys)\n        except Exception as exc:  # noqa: BLE001\n            pytest.fail(f\"Link/connect failed: {exc}\")\n    \n        configured_result = await client.async_execute(\"area_get_configured\", timeout_s=timeout_s)\n        if not configured_result.ok:\n            await client.async_disconnect()\n            pytest.fail(f\"area_get_configured failed: {configured_result.error}\")\n        assert_payload_shape(\"area_get_configured\", configured_result.data)\n    \n        inv = client.state.inventory\n        if not inv.configured_areas:\n            await client.async_disconnect()\n            pytest.fail(\"No configured areas received.\")\n    \n        for area_id in sorted(inv.configured_areas):\n            result = await client.async_execute(\"area_get_attribs\", area_id=area_id, timeout_s=timeout_s)\n            if not result.ok:\n                if isinstance(result.error, AuthorizationRequired):\n                    await client.async_disconnect()\n                    pytest.skip(\"area_get_attribs requires authorization.\")\n                await client.async_disconnect()\n                pytest.fail(f\"area_get_attribs failed: {result.error}\")\n            assert_payload_shape(\"area_get_attribs\", result.data)\n            area = client.state.areas.get(area_id)\n            name = getattr(area, \"name\", None) if area is not None else None\n            print(f\"area[{area_id}].name={name or 'MISSING'}\")\n    \n        print(f\"configured_areas={len(inv.configured_areas)}\")\n        await client.async_disconnect()\n    \n        missing_names = [\n            area_id\n            for area_id in sorted(inv.configured_areas)\n            if not getattr(client.state.areas.get(area_id), \"name\", None)\n        ]\n        if missing_names:\n            pytest.fail(f\"Missing area names for ids: {missing_names}\")\n    \n        expected_name = \"Area 1\"\n        area_one = client.state.areas.get(1)\n        area_one_name = getattr(area_one, \"name\", None) if area_one is not None else None\n>       assert area_one_name == expected_name\nE       AssertionError: assert 'Main House' == 'Area 1'\nE         \nE         - Area 1\nE         + Main House\n\ntest/test_e27_area_info_live.py:110: AssertionError"}}
