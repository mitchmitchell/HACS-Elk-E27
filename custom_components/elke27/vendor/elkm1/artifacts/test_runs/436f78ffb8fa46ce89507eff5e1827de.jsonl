{"run_id": "436f78ffb8fa46ce89507eff5e1827de", "test_id": "test/test_e27_retry_seq.py::test_retry_uses_same_sequence_number", "record_type": "test_start", "t_ms": 0, "ts_utc": "2026-01-04T08:11:00Z", "meta": {"pid": 81588}}
{"run_id": "436f78ffb8fa46ce89507eff5e1827de", "test_id": "test/test_e27_retry_seq.py::test_retry_uses_same_sequence_number", "record_type": "test_end", "t_ms": 15, "ts_utc": "2026-01-04T08:11:00Z", "outcome": "fail", "error": {"when": "call", "longrepr": "def test_retry_uses_same_sequence_number() -> None:\n        kernel = E27Kernel(request_timeout_s=0.01, request_max_retries=1)\n        kernel._session = object()\n    \n        sent: list[int] = []\n    \n        def _send_with_seq(seq, domain, name, payload, *, pending, opaque, expected_route):\n            sent.append(seq)\n            return seq\n    \n        kernel._send_request_with_seq = _send_with_seq  # type: ignore[assignment]\n        kernel._build_request_message = lambda *args, **kwargs: {}  # type: ignore[assignment]\n        kernel._log_outbound = lambda *args, **kwargs: None  # type: ignore[assignment]\n    \n        seq = kernel._send_request(\n            \"zone\",\n            \"get_status\",\n            {\"zone_id\": 1},\n            pending=True,\n            opaque=None,\n            expected_route=(\"zone\", \"get_status\"),\n        )\n        assert sent == [seq]\n    \n        for state in kernel._inflight.values():\n            state.sent_at = kernel.now() - (state.timeout_s + 1.0)\n            state.next_retry_at = kernel.now() - 1.0\n    \n        kernel._retry_expired_requests()\n    \n>       assert sent == [seq, seq]\nE       assert [1] == [1, 1]\nE         \nE         Right contains one more item: 1\nE         Use -v to get more diff\n\ntest/test_e27_retry_seq.py:36: AssertionError"}}
